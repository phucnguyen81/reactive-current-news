<ng-container *ngIf="view$ | async as view">
  <ng-container *ngIf="view.latestNews as latestNews">
    <mat-toolbar class="fixed-header" color="primary">
      <mat-toolbar-row>
        <button mat-button (click)="goToHome()">{{view.title}}</button>
        <button mat-button (click)="fetch()">Fetch</button>
        <span class="example-fill-remaining-space"></span>
        <button mat-button>
          Today remaining requests: {{latestNews.rateLimitRemaining}}
        </button>
        <button mat-button (click)="goToSettings()">
          <mat-icon aria-hidden="false" aria-label="Application Settings">
            settings_applications
          </mat-icon>
        </button>
        <button mat-button (click)="goToStatus()">
          <mat-icon aria-hidden="false" aria-label="Application Status">
            info
          </mat-icon>
        </button>
      </mat-toolbar-row>
    </mat-toolbar>
    <mat-toolbar>
      <!-- Empty toolbar to create top margin -->
      <mat-toolbar-row></mat-toolbar-row>
    </mat-toolbar>
  </ng-container>
</ng-container>

<ng-container *ngIf="view$ | async as view">
  <ng-container *ngIf="view.latestNews as latestNews">
    <mat-card class="example-card" *ngFor="let news of latestNews.news">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>{{news.title}}</mat-card-title>
        <mat-card-subtitle>Author: {{news.author}}</mat-card-subtitle>
        <mat-card-subtitle>Category: {{news.category}}</mat-card-subtitle>
      </mat-card-header>
      <div *ngIf="news.image">
        <img mat-card-image src="{{news.image}}" alt="{{news.title}}">
      </div>
      <mat-card-content>
        <p>{{news.description}}</p>
      </mat-card-content>
      <mat-card-actions>
        <a mat-button href="{{news.url}}"
          (click)="openNewTab(news, $event)">
          Read More
        </a>
      </mat-card-actions>
    </mat-card>
  </ng-container>
</ng-container>
